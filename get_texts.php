<?php
// Включаем отображение всех ошибок для удобства отладки
error_reporting(E_ALL);
// Устанавливаем настройку, чтобы ошибки отображались на экране
ini_set('display_errors', 1);
// Указываем, что ответ будет в формате JSON
header('Content-Type: application/json');

// Путь к файлу, который нужно прочитать
$filePath = 'txt/ustanov01.txt';

// Проверяем, существует ли файл по указанному пути
if (file_exists($filePath)) {
    // Читаем файл построчно, игнорируя пустые строки
    $lines = file($filePath, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
    // Создаем пустой массив для хранения данных
    $texts = [];

    // Проходим по каждой строке файла
    foreach ($lines as $line) {
        // Разделяем строку на ключ и значение по символу '='
        // Третий аргумент (2) ограничивает разделение на две части
        list($key, $value) = explode('=', $line, 2);
        // Убираем лишние пробелы и добавляем ключ и значение в массив
        $texts[trim($key)] = trim($value);
    }

    // Преобразуем массив в JSON и выводим его
    echo json_encode($texts);
} else {
    // Если файл не найден, возвращаем JSON с сообщением об ошибке
    echo json_encode(['error' => 'Файл текстов не найден.']);
}
?>
